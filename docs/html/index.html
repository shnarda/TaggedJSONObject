<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TaggedJSONObject: TaggedJSONObject</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TaggedJSONObject
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="classTaggedJSONObject.html" title="The TaggedJSONObject class stores the JSON data given by the tagged object.">TaggedJSONObject</a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__home_shnarda_TaggedJsonObject_README"></a> Using the JSON support from the Qt Framework, this library allows user to define labeled JSON objects that understands the type it currently holds, inspired from the Typescript's JSON interfaces. This comes with the following benefits: 1) Introduces the type awareness for the target JSON field. This allows the IDE to autocomplete the fields and their potential methods. Type awareness also prevents potential runtime errors that comes from mistyping or type safety related mistakes. 2) The object checks for the missing fields from the json data (it can be disabled) 3) Class interface reduces the verbosity while accessing the desired field Documentation can be accessed on docs/html/index.html</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Installation</h1>
<p>Requirements for this library are as follows: 1) QT Framework (Qt5 or later) 2) C++17 or later \ This library only uses the header files, so building the project isn't required. \ Building the project can still be done for the tests and code examples.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Usage/Examples</h1>
<p>The following example is based on the "Examples/example.cpp" example file.\ Let's say, a file named "example.json" contains the following json data: </p><div class="fragment"><div class="line">{</div>
<div class="line">    &quot;example_int&quot;: 42,</div>
<div class="line">    &quot;example_str&quot;: &quot;Hello world!&quot;,</div>
<div class="line">    &quot;example_double&quot;: 35.5,</div>
<div class="line">    &quot;example_sub_class&quot;:{</div>
<div class="line">        &quot;example_sub_str&quot;: &quot;Hello from an object!&quot;</div>
<div class="line">    },</div>
<div class="line">    &quot;example_arr&quot;: [&quot;Hello&quot;, &quot;World&quot;],</div>
<div class="line">    &quot;example_mixed_arr&quot;: [42, &quot;is&quot;, &quot;the&quot;, &quot;answer&quot;, &quot;to&quot;, &quot;everything&quot;]</div>
<div class="line">}</div>
</div><!-- fragment --><p> To parse this data, first we need to define our tagged JSON object class with the help of the "TJO_DEFINE_JSON_TAGGED_OBJECT" preprocessor macro. Each field of the defined class should match with the field names of the json data</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">/* </div>
<div class="line">This is the definition for the inner object which will be used for defining the outer object.</div>
<div class="line">Alternatively, the inner class can be defined as TaggedQJsonObject at the outer class but this</div>
<div class="line">prevents inner class members to be accessed directly, which defeats the purpose of this library.</div>
<div class="line">*/</div>
<div class="line">TJO_DEFINE_JSON_TAGGED_OBJECT(InnerClass,</div>
<div class="line">                         (TaggedJSONString, example_sub_str))</div>
<div class="line"> </div>
<div class="line">/* </div>
<div class="line">The first parameter of the macro is the name of the class, which is OuterClass for this instance.</div>
<div class="line">Other parameters are the type-field pairs that defines the members of the defined object.</div>
<div class="line">It should be noted that TaggedJSONObject class variants should be used for the field types instead of</div>
<div class="line">the regular types like int, double etc.</div>
<div class="line">*/</div>
<div class="line">TJO_DEFINE_JSON_TAGGED_OBJECT(OuterClass,</div>
<div class="line">                          (TaggedJSONInt, example_int),</div>
<div class="line">                          (TaggedJSONString, example_str),</div>
<div class="line">                          (TaggedJSONDouble, example_double),</div>
<div class="line">                          (InnerClass, example_sub_class),</div>
<div class="line">                          (TaggedJSONStringArray, example_arr),</div>
<div class="line">                          (TaggedJSONVariantArray, example_mixed_arr))</div>
</div><!-- fragment --><p> The intention of the statements above has the similar intentions with the statements form the following Typescript interfaces</p>
<div class="fragment"><div class="line">interface InnerClass{</div>
<div class="line">  example_sub_str: string</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">interface OuterClass{</div>
<div class="line">  example_int: number;</div>
<div class="line">  example_str: string;</div>
<div class="line">  example_double: number;</div>
<div class="line">  example_sub_class: InnerClass;</div>
<div class="line">  example_arr: Array&lt;string&gt;;</div>
<div class="line">  example_mixed_arr: Array&lt;any&gt;;</div>
<div class="line">}</div>
</div><!-- fragment --><p> Later on, we can declare an instance by, either passing a QByteArray that stores the json data, by passing a QJsonObject or by passing the QString that holds the path of the json document.</p>
<div class="fragment"><div class="line">{c++}</div>
<div class="line">   QString jsonLocation(&quot;../../Examples/example.json&quot;);</div>
<div class="line"> </div>
<div class="line">   //Create an instance of the tagged object that has been defined by the macro</div>
<div class="line">   OuterClass exampleObject(jsonLocation);</div>
<div class="line"> </div>
<div class="line">   //Alternatively exampleObject.example_int.get() can be used as well</div>
<div class="line">   qDebug() &lt;&lt; *exampleObject.example_int; //42</div>
<div class="line"> </div>
<div class="line">   //Mutating stored values is allowed as long as the class isn&#39;t const</div>
<div class="line">   exampleObject.example_int = -1;</div>
<div class="line">   qDebug() &lt;&lt; exampleObject.example_int; //-1</div>
<div class="line"> </div>
<div class="line">   //Defining Tagged JSON objects inside another tagged JSON object allows chain access operations</div>
<div class="line">   qDebug() &lt;&lt; *exampleObject.example_sub_class.example_sub_str; // &quot;Hello from an object!&quot;</div>
<div class="line"> </div>
<div class="line">   //Arrays can be accessed by indexing</div>
<div class="line">   qDebug() &lt;&lt; exampleObject.example_arr[0]; //&quot;Hello&quot;</div>
<div class="line">   exampleObject.example_arr.at(0) = &quot;Another&quot;;</div>
<div class="line">   qDebug() &lt;&lt; exampleObject.example_arr; //&quot;Another World&quot;</div>
<div class="line"> </div>
<div class="line">   //Iterator access is available but it will be presented as QJsonValue</div>
<div class="line">   const QJsonArray::const_iterator it = exampleObject.example_arr-&gt;begin();</div>
<div class="line">   foreach(const QJsonValue&amp; curText, *exampleObject.example_arr)</div>
<div class="line">       qDebug() &lt;&lt; curText.toString(); //&quot;Another&lt;newline&gt;World&quot;;</div>
<div class="line"> </div>
<div class="line">   //JSON arrays with varied types can be integrated by TaggedJSONVariantArray</div>
<div class="line">   int answer_to_everything = exampleObject.example_mixed_arr[0].toInt();</div>
<div class="line">   QString text_everything = exampleObject.example_mixed_arr[5].toString();</div>
<div class="line"> </div>
<div class="line">   qDebug() &lt;&lt; answer_to_everything; //42</div>
<div class="line">   qDebug() &lt;&lt; text_everything;  //everything</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md3"></a>
Acknowledgements</h1>
<ul>
<li><a href="https://github.com/swansontec/map-macro">map-macro for the recursive macros</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md4"></a>
License</h1>
<p>Like Qt library, this library is under the dual license LGPLv3 and GPLv2. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
